<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forte Tech - Docs Adm Geral</title>
    <link href="/css/DocumentosProcesso/docProcessoAdmGeral.css" rel="stylesheet">
    <link rel="icon" href="/images/ico_mini_ft.png">
    <meta name="codTela" content="DCFT001">

</head>
<body>
    <div id="loading-screen" style="display: none;">
        <img src="/images/GIF CARREGANDO FORTE TECH (3).gif" alt="Carregando...">
    </div>
    

    <!-- BARRA LATERAL -->
  <div id="sidebar-placeholder"></div>
    <script>
    async function carregarSidebarComScripts() {
        try {""
            const res = await fetch("/components/sidebar.html?v=" + Date.now());
            if (!res.ok) {
                throw new Error(`Erro ao carregar o componente: ${res.statusText}`);
            }
            const html = await res.text();
            const container = document.getElementById("sidebar-placeholder");

            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;

            
            const styles = tempDiv.querySelectorAll('style');
            styles.forEach(style => {
                const newStyle = document.createElement('style');
                newStyle.textContent = style.textContent;
                document.head.appendChild(newStyle); 
            });

            styles.forEach(s => s.remove());
            const scripts = tempDiv.querySelectorAll('script');
            scripts.forEach(s => s.remove());

            container.innerHTML = tempDiv.innerHTML; 
            scripts.forEach(script => {
                const novoScript = document.createElement("script");
                if (script.src) {
                    novoScript.src = script.src;
                    novoScript.async = false;
                    document.body.appendChild(novoScript);
                } else {
                   
                    novoScript.textContent = script.textContent;
                    document.body.appendChild(novoScript);
                }
            });
            if (typeof window.aplicarPermissoesUsuario === "function") {
                window.aplicarPermissoesUsuario();
            } else {
                console.warn("Função aplicarPermissoesUsuario não encontrada. Certifique-se de que ela esteja definida globalmente no seu script principal.");
            }
        } catch (error) {
            console.error("Erro ao carregar a sidebar:", error);
        }
    }
    carregarSidebarComScripts();
    </script>
    <div class="barra_acima_padrao">
        <p class="txt-titulo">Lista de Documentos do Processo do Administrativo</p>
        <div class="containerduvida" style="margin-left: auto;">
            <img id="CadNovDocumento" src="/images/ico_novo_documento.png" onclick="abrirCadastroDocumento()" title="Cadastrar Novo Documento" style="width: 45px;cursor: pointer;margin-top: 4px;display: none;">
            <img src="/images/ico_duvida.png" title="Solicitar Documentação" style="width: 45px;cursor: pointer;">
        </div>
    </div>
    <main class="container_meio">

        <div class="container_filtros" style="display: flex;">
            <div class="linha" style="margin-bottom: 18px;">
                <div class="campo">
                    <label>Nome do documento</label>
                    <input class="BoxPadrao" style="width: 350px;">
                </div>
            </div>
            <div class="linha" style="gap: 2px;">
            <label class="checkboxfiltrosituacoes"><input type="checkbox" name="situacao" value="Documento do Processo">Documento do Processo</label>
            <label class="checkboxfiltrosituacoes"><input type="checkbox" name="situacao" value="Formulario">Formulario</label>
            <label class="checkboxfiltrosituacoes"><input type="checkbox" name="situacao" value="Documentos de Apoio">Documentos de Apoio</label>
            </div>
            <div class="campobotbusc" style="margin-left: auto;margin-top: -21px;margin-right: 15px;">
                <button class="BotaoBuscar">Buscar</button>
            </div>
        </div>
        <div class="container-tabela-itens-doc">
            <div class="tabela-wrapper">
                <table class="tabela-documentos">
                    <thead>
                    <tr>
                        <th>Nome Documento</th>
                        <th style="width: 90px; text-align: center;">Revisão</th>
                        <th style="display: none;">Tipo de Documento</th>
                        <th id="ColunaEdit" style="width: 40px; display: none;"></th>
                        <th id="ColunaExcluir" style="width: 40px; display: none;"></th>
                    </tr>
                    </thead>
                    <tbody id="table-body-documentos">
                    
                    </tbody>
                </table>
            </div>
        </div>
    </main>
    <script>

function abrirCadastroDocumento() {
    const largura = 450;
    const altura = 210;

    // Calcula posição central
    const left = (window.screen.width / 2) - (largura / 2);
    const top = (window.screen.height / 2) - (altura / 2);

    window.open(
        '/Html/NovoDocumento/CadNovoDocProcesso.html',
        'CadastroDocumento',
        `width=${largura},height=${altura},left=${left},top=${top},toolbar=no,location=no,menubar=no,scrollbars=no,resizable=no`
    );
}
function limparlocalstorage(){
    localStorage.removeItem("ProcessoAberto");
}
window.addEventListener('beforeunload', function () {
    localStorage.removeItem('ProcessoAberto');
});
window.addEventListener('load', function () {
    localStorage.setItem('ProcessoAberto', "ctAdmGeral");
});
document.addEventListener("DOMContentLoaded", () => {
    aplicarPermissoesTela("DCFT001"); // substitua pelo código da tela atual
});

    </script>



    <script src="/js/DocumentosProcesso/permCampos.js"></script>
    <script src="/js/DocumentosProcesso/tblDocAdmGeral.js"></script>
    <script src="/Javascript/Engenharia/Filtros.js"></script>
    <!-- <script src="/Javascript/Gerais/prms.js"></script> -->
</body>
</html>
